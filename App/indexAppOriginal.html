<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APP</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Video.js CSS -->
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <!-- Video.js HLS plugin -->
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-hls@5.15.0/dist/videojs-contrib-hls.min.js"></script>
</head>

<body>

    <!-- VISTA INICIO -->
    <div id="view-home" class="view-section active">
        <div class="contenedor-principal">
            <div class="etiqueta1">
                <div class="contenedor-cont-pelis"></div><span id="contUsuarios"></span>
            </div>
            <div id="contenedorFiltros"></div>
            <div class="contenedor-lista">
                <h3 class="section-title" style="text-wrap: nowrap;">Reci√©n agregadas</h3>
                <div id="contenedorEspecial"></div>

                <h3 class="section-title" style="text-wrap: nowrap;">Series</h3>
                <div id="contenedorEspecialSeries"></div>

                <h3 class="section-title" style="text-wrap: nowrap;">Todas las pel√≠culas y series</h3>
                <div id="contenedorTodas" class="contenedor-grid"></div>
            </div>
        </div>
        <div id="anuncio-container1"></div>
        <div class="contenedor-buscador">
            <input type="search" id="buscar" placeholder="...Buscar pel√≠cula...">
        </div>
        <div class="contenedor-lateral-derecho">
            <h3>Contadores</h3>
            <!-- BEGIN: Powered by Supercounters.com -->
            <center>
                <script type="text/javascript" src="//widget.supercounters.com/ssl/online_i.js"></script>
                <script type="text/javascript">sc_online_i(1709265, "ffffff", "000000");</script><br><noscript><a
                        href="https://www.supercounters.com/">free online counter</a></noscript>
            </center>
            <!-- END: Powered by Supercounters.com -->
            <!-- BEGIN: Powered by Supercounters.com -->
            <center>
                <script type="text/javascript" src="//widget.supercounters.com/ssl/vt.js"></script>
                <script
                    type="text/javascript">var sc_visitor_var = sc_visitor_var || []; sc_vt(1709266, "000000", "ffffff", "ffffff", 10)</script>
                <br><noscript><a href="http://www.supercounters.com/">free online counter</a></noscript>
            </center>
            <!-- END: Powered by Supercounters.com -->
            <!-- BEGIN: Powered by Supercounters.com -->
            <center>
                <script type="text/javascript" src="//widget.supercounters.com/ssl/flag.js"></script>
                <script type="text/javascript">sc_flag(1709261, "000000", "FFFFFF", "FFFFFF", 2, 100, 0, 0)</script>
                <br><noscript><a href="http://www.supercounters.com/">Flag Counter</a></noscript>
            </center>
            <!-- END: Powered by Supercounters.com -->
            <a href="https://www.andyhoppe.com/" title="Contador"><img src="//c.andyhoppe.com/1740971181"
                    style="border:none" alt="Contador" /></a>
        </div>
    </div>

    <!-- VISTA LISTAS (Historial, Likes, Watchlist) -->
    <div id="view-lists" class="view-section" style="display: none;">
        <div class="lists-container">
            <h2 class="view-title">Mis Cosas</h2>

            <div class="list-section">
                <h3><i class="fa-solid fa-clock-rotate-left"></i> Continuar viendo</h3>
                <div id="list-history" class="horizontal-scroll">
                    <p class="empty-msg">No has visto nada recientemente.</p>
                </div>
            </div>

            <div class="list-section">
                <h3><i class="fa-solid fa-thumbs-up"></i> Me gustaron</h3>
                <div id="list-liked" class="horizontal-scroll">
                    <p class="empty-msg">No has dado like a nada a√∫n.</p>
                </div>
            </div>

            <div class="list-section">
                <h3><i class="fa-solid fa-bookmark"></i> Mi Lista (Watchlist)</h3>
                <div id="list-watchlist" class="horizontal-scroll">
                    <p class="empty-msg">Tu lista est√° vac√≠a.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- VISTA DESCARGAS -->
    <div id="view-downloads" class="view-section" style="display: none;">
        <div class="downloads-container">
            <h2 class="view-title">Descargas</h2>
            <div id="list-downloads" class="downloads-list">
                <p class="empty-msg">No hay descargas recientes.</p>
            </div>
        </div>
    </div>

    <!-- POPUP DETALLES PEL√çCULA -->
    <div id="contenedorJWPLAYER">
        <div class="prime-popup">
            <div class="background-image" id="bg-image-pop"></div>

            <div class="content">
                <div class="poster-container">
                    <div class="poster-image" id="poster-image-pop">
                        <div class="movie-title" id="movie-title-poster"></div>
                    </div>

                    <!-- Player wrapper embedded in poster container -->
                    <div id="player-wrapper"
                        style="display:none; width:100%; height:100%; flex-direction:column; background:black; position:relative;">
                        <div id="close-player" onclick="closePlayerOnly()"
                            style="position:absolute; top:10px; right:10px; z-index:20; cursor:pointer; color:white; font-size:20px; background:rgba(0,0,0,0.5); padding:5px 10px; border-radius:5px;">
                            X
                        </div>

                        <div id="player" style="width:100%; flex:1; position:relative; min-height:150px;"></div>

                        <div id="next-message"
                            style="display:none; position:absolute; bottom:60px; left:20px; z-index:15; background:rgba(0,0,0,0.7); padding:10px; border-radius:5px;">
                        </div>

                        <div id="series-controls"
                            style="display:none; flex-direction:column; background:rgba(0,0,0,0.8);">
                            <h3 id="more-label" style="margin:5px 10px; font-size:14px; display:none;">M√°s Cap√≠tulos
                            </h3>
                            <div class="shelf" id="shelf"
                                style="display:none; width:100%; overflow-x:auto; padding:5px; min-height: 100px;">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-container">
                    <div class="prime-badge">
                        <i class="fa-solid fa-crown"></i> Gratis
                    </div>

                    <h1 class="title-main" id="titulo-pop"></h1>
                    <div class="views" id="vistas"></div>
                    <div class="meta-info" id="metadata-full-pop">
                        <!-- Content will be populated by JS -->
                    </div>


                    <div class="action-row">
                        <button class="btn btn-play" id="btn-play-movie"><i class="fa fa-play"></i> Play movie</button>
                        <button class="btn btn-download" id="btn-download"><i class="fa fa-download"></i>
                            Download</button>
                    </div>

                    <div class="interaction-row">
                        <!-- Watchlist -->
                        <div class="interaction-btn btn-watchlist"><i class="fa-regular fa-bookmark"></i> Watchlist
                        </div>

                        <!-- Like/Dislike Group -->
                        <div class="mobile-group">
                            <div class="interaction-btn btn-like-action" onclick="votar('like')">
                                <i id="iconLike" class="fa-regular fa-thumbs-up"></i> Like <span class="count"
                                    id="textLike">0</span>
                            </div>
                            <div class="interaction-btn btn-dislike-action" onclick="votar('dislike')">
                                <i id="iconDislike" class="fa-regular fa-circle-xmark"></i> Not for me <span
                                    class="count" id="textDislike">0</span>
                            </div>
                        </div>

                        <!-- Share -->
                        <div class="interaction-btn btn-share"><i class="fa fa-share"></i> Share</div>
                    </div>

                    <div class="desc" id="descripcion-pop"></div>

                    <!-- Extra elements from original that might be needed -->
                    <div id="audios-pop" style="display:none;"></div>
                    <div id="anuncio-container2" style="margin-top:20px;"></div>
                    <div id="comentarios-pop" onclick="cargarChat()"
                        style="margin-top:10px; cursor:pointer; opacity:0.7;">Mostrar comentarios</div>
                    <div id="disqus_thread"></div>

                    <!-- Hidden elements required by script.js but not used in display -->
                    <div id="metadata-pop" style="display:none;"></div>
                    <div id="generos-pop" style="display:none;"></div>
                </div>
            </div>

            <!-- Close button for the popup -->
            <div id="cerrar-pop" onclick="closePopJW()"
                style="position:absolute; top:15px; right:15px; z-index:20; cursor:pointer; color:white; font-size:20px; background:rgba(0,0,0,0.3); padding:5px 12px; border-radius:50%;">
                X</div>
        </div>
    </div>

    <!-- BARRA DE NAVEGACI√ìN INFERIOR -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchView('home')">
            <i class="fa-solid fa-house"></i>
        </div>
        <div class="nav-item" onclick="switchView('lists')">
            <i class="fa-solid fa-layer-group"></i>
        </div>
        <div class="nav-item" onclick="switchView('downloads')">
            <i class="fa-solid fa-download"></i>
        </div>
        <div class="nav-item" onclick="openRequests()">
            <i class="fa-solid fa-envelope-open-text"></i>
        </div>
    </nav>

    <!-- Popup para seleccionar calidad -->
    <div id="popup-calidades" class="popup-calidades">
        <div class="popup-contenido">
            <h3>Selecciona la calidad</h3>
            <div id="lista-calidades" class="lista-calidades">
                <!-- Aqu√≠ se generan los botones de calidades -->
            </div>
            <button class="cerrar-popup" onclick="cerrarPopupCalidades()">Cerrar</button>
        </div>
    </div>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault());
        var BASE_URL = "https://proyectoja.github.io/App/";

        var link = document.createElement("link");
        link.rel = "stylesheet";
        //link.href = BASE_URL + "style.css"; //PRODUCCI√ìN
        link.href = "style.css"; //DESARROLLO
        document.head.appendChild(link);

        var script = document.createElement("script");
        //script.src = BASE_URL + "script.js"; //PRODUCCI√ìN
        script.src = "script.js"; //DESARROLLO
        script.async = true;
        document.body.appendChild(script);


        document.addEventListener('chatLoaded', function () {
            document.addEventListener('chatbroPtCountChanging', function (event) {
                const count = event?.ptCount?.web ?? 0;
                const onlineDiv = `üëÅÔ∏è ${count}`;
                contUsuarios.textContent = `| Viendo pelis: ${onlineDiv}`;
            });
        });

    </script>

</body>

<script async id="chatBroEmbedCode">
    /* Chatbro Widget Embed Code Start */
    function ChatbroLoader(chats, async) {
        async = !1 !== async;
        var params = {
            embedChatsParameters: chats instanceof Array ? chats : [chats],
            lang: navigator.language || navigator.userLanguage,
            needLoadCode: 'undefined' == typeof Chatbro,
            embedParamsVersion: localStorage.embedParamsVersion,
            chatbroScriptVersion: localStorage.chatbroScriptVersion
        },
            xhr = new XMLHttpRequest;
        xhr.withCredentials = !0, xhr.onload = function () {
            eval(xhr.responseText)
        }, xhr.onerror = function () {
            console.error('Chatbro loading error')
        }, xhr.open('GET', 'https://www.chatbro.com/embed.js?' + btoa(unescape(encodeURIComponent(JSON.stringify(params)))), async), xhr.send()
    } /* Chatbro Widget Embed Code End */
    ChatbroLoader({
        encodedChatId: '98wVn'
    });
</script>

</html>